{% extends "pretixpresale/event/base.html" %}
{% load i18n %}
{% load bootstrap3 %}
{% load eventurl %}
{% load static %}

{% block title %}{% trans "New request" %}{% endblock %}
{% block content %}
    <h2>
        {% if form.fields.swap_type.choices|length > 1 %}
            {% blocktrans trimmed with code=order.code %}
                Request to swap or cancel your order: {{ code }}
            {% endblocktrans %}
        {% elif form.fields.swap_type.choices.0.0 == "s" %}
            {% blocktrans trimmed with code=order.code %}
                Request to swap your order: {{ code }}
            {% endblocktrans %}
        {% else %}
            {% blocktrans trimmed with code=order.code %}
                Request to cancel your order: {{ code }}
            {% endblocktrans %}
        {% endif %}
        {% if order.testmode %}
            <span class="label label-warning">{% trans "TEST MODE" %}</span>
        {% endif %}
        <a href="{% eventurl event "presale:event.order" secret=order.secret order=order.code %}"
                class="btn btn-default">
            {% trans "Back to order" %}
        </a>
        {% include "pretixpresale/event/fragment_order_status.html" with order=order event=request.event class="pull-right flip" %}
        <div class="clearfix"></div>
    </h2>
    <form method="post">{% csrf_token %}
    {% if form.position %}
        {% bootstrap_field form.position %}
    {% endif %}
    {% if form.swap_type %}
        {% bootstrap_field form.swap_type %}
    {% endif %}
    {% if form.swap_method %}
        {% bootstrap_field form.swap_method %}
    {% endif %}
    {% if form.cancel_method %}
        {% bootstrap_field form.cancel_method %}
    {% endif %}
    {% if form.swap_code %}
        {% bootstrap_field form.swap_code %}
    {% endif %}
    {% if form.cancel_code %}
        {% bootstrap_field form.cancel_code %}
    {% endif %}
    {% for field in form.position_fields %}
        {% bootstrap_field field %}
    {% endfor %}
    <button type="submit" class="btn btn-primary btn-block">{% trans "Send request" %}</button>
    </form>
    <script src="{% static "pretix_swap/swap.js" %}"></script>
{% endblock %}

